const UserPersistence = {
  mounted() {
    // Try to get existing user ID from localStorage
    let storedUserId = localStorage.getItem("anonymous_id");
    let currentUserId = this.el.dataset.anonymousId;

    if (!storedUserId) {
      // If no existing ID, store the one generated by the server
      localStorage.setItem("anonymous_id", currentUserId);
    } else if (storedUserId !== currentUserId) {
      // If we have a different stored ID, send it to the server
      this.pushEvent("restore_user_id", { userId: storedUserId });
    }
  }
};

export default {
  UserPersistence
};